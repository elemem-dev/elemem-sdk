# Elemem加速卡安装指南

## 文档信息
- **版本**：2.0.0
- **更新日期**：2025年7月
- **适用范围**：Elemem向量数据加速卡

---

## 目录
1. [安装前准备](#安装前准备)
2. [硬件安装](#硬件安装)
3. [驱动程序安装](#驱动程序安装)
4. [固件程序安装](#固件程序安装)
5. [故障排除](#故障排除)
6. [注意事项](#注意事项)

---

## 安装前准备

### 系统要求
**操作系统支持**
- Ubuntu 24.04 LTS

**硬件要求**
- CPU：AMD EPYC Rome 7H12（2.60G/256M/64C/128T/280W）
- 内存：内存 32GB DDR4 ECC RDIMM * 4
- 主板：支持 PCIe 3.0 x4
- 电源：至少 650W（推荐 750W 80+ 金牌认证）
- 硬盘：SSD 960GB U.2 2.5 Nvme 读取密集型 * 2 + HDD 6T SATA 企业级 3.5 7200 * 3
- 机箱：支持双槽显卡

### 工具准备
- 十字螺丝刀
- 防静电手套或防静电腕带

---

## 硬件安装

### 第一步：断电准备
1. 完全关闭计算机并断开电源线
2. 按住电源键10秒以释放残余电荷
3. 佩戴防静电手套或防静电腕带

### 第二步：打开机箱
1. 拆除机箱左侧面板螺丝
2. 小心滑开或取下侧面板
3. 找到主板上的PCIe插槽位置

### 第三步：选择合适的PCIe插槽
1. 优先选择最靠近CPU的PCIe x16插槽
2. 确保插槽周围有足够空间散热
3. 检查插槽是否支持PCIe 3.0或4.0规格

### 第四步：安装加速卡
1. 拆除机箱后挡板对应位置的挡片
2. 取出Elemem加速卡，避免触碰金手指
3. 将加速卡垂直插入PCIe插槽
4. 确保卡牢固插入，听到"咔哒"声
5. 使用螺丝将加速卡固定在机箱挡板上

### 第五步：检查安装
1. 确认加速卡已正确安装
2. 检查所有连接线是否牢固
3. 合上机箱并固定螺丝

---

## 驱动程序安装

下载最新的加速卡程序
```bash
# 下载
wget https://github.com/elemem-dev/elemem-sdk/releases/download/v2.0.1.0/elemem-vector.tar

# 解压
unzip v2.0.0.1.zip

# 目录结构
release
├── elemem-driver-2.0.7.202507161739.run          // 驱动
├── elemem-firmware-2.0.2.8.bin                   // 固件
├── elemem_sdk_2.0.1.202507151532_ubuntu24.04.tar // 软件
```

**Ubuntu系统**
```bash
# 更新包管理器
sudo apt update

# 安装驱动
sudo bash elemem-driver-2.0.7.202507161739.run

# 检查驱动加载
lsmod | grep elem

# 输出下面内容说明安装成功
elem                  110592  5

# 查看设备状态
elem-smi -L

# 温度监控
elem-smi -q -d temp -i 0 -l 1
```

elem-smi管理工具更多使用方法见 [Elemem向量加速卡SMI使用手册](./Elemem%20向量数据加速卡%20SMI%20使用手册.pdf)

## 固件程序安装

```bash

# 安装固件
sudo elem-update elemem-firmware-2.0.2.8.bin

# 重启系统
sudo reboot

# 查看固件版本
elem-smi -L
+-------------------------+----------------------------------+-----------------------+-------------------------+-------------------------+
|        overview         |                                  |                       |                         |                         |
+-------------------------+----------------------------------+-----------------------+-------------------------+-------------------------+
|       card_index        |            group_num             |       chip_num        |        bank_size        |          alive          |
+-------------------------+----------------------------------+-----------------------+-------------------------+-------------------------+
|            0            |                26                |          78           |           16            |            1            |
+-------------------------+----------------------------------+-----------------------+-------------------------+-------------------------+
|      soft_version       |          driver_version          |      smi_version      |    firmware_version     |      fpga_version       |
+-------------------------+----------------------------------+-----------------------+-------------------------+-------------------------+
|   2.0.0.202507171131    |        2.0.1.202507031525        |  2.0.6.202507141135   |        25070801         |        25071401         |
```

## 软件安装

``` bash
# 解压o
tar xvf elemem_sdk_2.0.1.202507151532_ubuntu24.04.tar

# 目录结构
├── index_coordinator
│   ├── bin
│   │   └── index_coordinator
│   ├── conf
│   │   └── index_coordinator.ini
├── redis
│   ├── bin
│   │   └── redis-server
│   ├── conf
│   │   └── redis.conf
├── sdk_client
│   ├── c++
│   │   ├── BUILD.bazel
│   │   ├── hilbert_client_demo.cpp
│   │   ├── include
│   │   │   └── hilbert_client.h
│   │   ├── lib
│   │   │   └── libhilbert_client.so
│   │   └── WORKSPACE.bazel
│   └── python
│       ├── client_demo.py
│       ├── requirements.txt
│       └── run.sh
├── start.sh
├── stop.sh
└── vpu_engine
    ├── bin
    │   └── reram_engine
    ├── conf
    │   └── reram_engine.ini

# 启动服务
sudo bash start.sh

# 检查启动是否成功
curl http://localhost:8000/health # 返回ok说明安装成功
curl http://localhost:7000/health # 返回ok说明安装成功
```

## 故障排除

### 常见问题及解决方案
见 [加速卡常见问题](./Elemem%20向量数据加速卡常见问题.md)

## 注意事项

⚠️ **安全警告**
- 安装前务必断电并释放静电
- 不要在通电状态下插拔设备
- 避免接触电路板上的元件

📋 **维护建议**
- 定期清理灰尘
- 监控运行温度
- 及时更新驱动程序
- 保持良好的散热环境

🔧 **性能优化**
- 使用高品质电源
- 保证充足的散热
- 定期进行性能测试
- 根据需要调整设置

---